document.addEventListener('DOMContentLoaded',function(){function e(){const e=document.getElementById('loading-screen');window.addEventListener('load',function(){setTimeout(()=>{e.classList.add('hidden');setTimeout(()=>{e.remove()},500)},1000)})}function t(){const e=document.getElementById('back-to-top');window.addEventListener('scroll',function(){window.pageYOffset>300?e.classList.add('visible'):e.classList.remove('visible')}),e.addEventListener('click',function(){window.scrollTo({top:0,behavior:'smooth'})})}function n(){const e=document.querySelector('.mobile-menu-btn'),t=document.querySelector('.mobile-menu');e&&t&&(e.addEventListener('click',function(){const n=e.getAttribute('aria-expanded')==='true';e.classList.toggle('active'),t.classList.toggle('active'),e.setAttribute('aria-expanded',!n),t.setAttribute('aria-hidden',n),document.body.style.overflow=n?'auto':'hidden'}),document.querySelectorAll('.mobile-nav-link').forEach(e=>{e.addEventListener('click',function(){e.classList.remove('active'),t.classList.remove('active'),e.setAttribute('aria-expanded','false'),t.setAttribute('aria-hidden','true'),document.body.style.overflow='auto'})}),document.addEventListener('click',function(n){e.contains(n.target)||t.contains(n.target)||(e.classList.remove('active'),t.classList.remove('active'),e.setAttribute('aria-expanded','false'),t.setAttribute('aria-hidden','true'),document.body.style.overflow='auto')}))}function o(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener('click',function(t){const n=this.getAttribute('href'),o=document.querySelector(n);o&&(t.preventDefault(),window.scrollTo({top:o.offsetTop-document.querySelector('.header').offsetHeight-20,behavior:'smooth'}))})})}function r(){typeof AOS!=='undefined'&&AOS.init({duration:800,easing:'ease-in-out',once:!0,offset:100});const e=document.querySelectorAll('.fade-in'),t=document.querySelectorAll('.slide-in-left'),n=document.querySelectorAll('.slide-in-right'),o=new IntersectionObserver(function(e){e.forEach(e=>{e.isIntersecting&&e.target.classList.add('visible')})},{threshold:.1,rootMargin:'0px 0px -50px 0px'});[...e,...t,...n].forEach(e=>{o.observe(e)})}function a(){document.querySelectorAll('.faq-question').forEach(e=>{e.addEventListener('click',function(){const t=this.parentElement,n=t.querySelector('.faq-answer'),o=this.getAttribute('aria-expanded')==='true';document.querySelectorAll('.faq-question').forEach(t=>{t!==this&&(t.setAttribute('aria-expanded','false'),t.parentElement.querySelector('.faq-answer').classList.remove('active'))}),this.setAttribute('aria-expanded',!o),n.classList.toggle('active')})})}function i(){const e=document.querySelectorAll('.stat-number'),t=new IntersectionObserver(function(e){e.forEach(e=>{if(e.isIntersecting){const t=e.target,n=parseInt(t.getAttribute('data-target')),o=2e3,r=n/(o/16);let a=0;const i=()=>{a+=r,a<n?(t.textContent=Math.floor(a),requestAnimationFrame(i)):t.textContent=n};i(),t.unobserve(t)}}},{threshold:.5});e.forEach(e=>{t.observe(e)})}function s(){const e=document.querySelector('.play-button'),t=document.querySelector('.video-placeholder');e&&t&&(e.addEventListener('click',function(){c()}),e.addEventListener('keydown',function(t){('Enter'===t.key||' '===t.key)&&(t.preventDefault(),c())}))}function c(){const e=document.createElement('div');e.className='video-modal',e.innerHTML='<div class="video-modal-content"><button class="video-modal-close" aria-label="Close video"><i class="fas fa-times"></i></button><div class="video-container"><iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="QR Attendance System Demo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div></div>';const t=document.createElement('style');t.textContent='.video-modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);display:flex;align-items:center;justify-content:center;z-index:10000;opacity:0;transition:opacity 0.3s ease}.video-modal.active{opacity:1}.video-modal-content{position:relative;width:90%;max-width:800px;background:white;border-radius:16px;overflow:hidden;transform:scale(0.8);transition:transform 0.3s ease}.video-modal.active .video-modal-content{transform:scale(1)}.video-modal-close{position:absolute;top:15px;right:15px;width:40px;height:40px;background:rgba(0,0,0,0.5);color:white;border:none;border-radius:50%;cursor:pointer;z-index:1;display:flex;align-items:center;justify-content:center;transition:background 0.3s ease}.video-modal-close:hover{background:rgba(0,0,0,0.7)}.video-container{position:relative;width:100%;height:0;padding-bottom:56.25%}.video-container iframe{position:absolute;top:0;left:0;width:100%;height:100%}',document.head.appendChild(t),document.body.appendChild(e),setTimeout(()=>{e.classList.add('active')},10);const n=e.querySelector('.video-modal-close');n.addEventListener('click',function(){d()}),e.addEventListener('click',function(t){t.target===e&&d()}),document.addEventListener('keydown',function(t){'Escape'===t.key&&e.classList.contains('active')&&d()});function d(){e.classList.remove('active'),setTimeout(()=>{e.remove(),t.remove()},300)}}function l(){document.querySelectorAll('form').forEach(e=>{e.addEventListener('submit',function(t){t.preventDefault();const n=new FormData(e),o=Object.fromEntries(n);let r=!0;e.querySelectorAll('[required]').forEach(e=>{e.value.trim()||(r=!1,e.classList.add('error'),u(e,'This field is required')):e.classList.remove('error'),d(e)}),r&&(m('Form submitted successfully!'),e.reset())})})}function u(e,t){d(e);const n=document.createElement('div');n.className='field-error',n.textContent=t,e.parentNode.appendChild(n)}function d(e){const t=e.parentNode.querySelector('.field-error');t&&t.remove()}function m(e){const t=document.createElement('div');t.className='success-message',t.innerHTML='<div class="success-content"><i class="fas fa-check-circle"></i><span>'+e+'</span></div>';const n=document.createElement('style');n.textContent='.success-message{position:fixed;top:20px;right:20px;background:#10b981;color:white;padding:15px 20px;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15);z-index:10000;transform:translateX(100%);transition:transform 0.3s ease}.success-message.show{transform:translateX(0)}.success-content{display:flex;align-items:center;gap:10px}',document.head.appendChild(n),document.body.appendChild(t),setTimeout(()=>{t.classList.add('show')},10),setTimeout(()=>{t.classList.remove('show');setTimeout(()=>{t.remove(),n.remove()},300)},3e3)}function p(){const e=document.createElement('a');e.href='#main-content',e.textContent='Skip to main content',e.className='skip-link',e.style.cssText='position:absolute;top:-40px;left:6px;background:#000;color:#fff;padding:8px;text-decoration:none;z-index:10000;transition:top 0.3s',e.addEventListener('focus',function(){this.style.top='6px'}),e.addEventListener('blur',function(){this.style.top='-40px'}),document.body.insertBefore(e,document.body.firstChild);const t=document.querySelector('main')||document.querySelector('.main-content');t&&!t.id&&(t.id='main-content'),document.querySelectorAll('[role="button"]').forEach(e=>{e.addEventListener('keydown',function(t){('Enter'===t.key||' '===t.key)&&(t.preventDefault(),this.click())})});const n=document.createElement('div');n.setAttribute('aria-live','polite'),n.setAttribute('aria-atomic','true'),n.className='sr-only',n.style.cssText='position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0',document.body.appendChild(n),window.announceToScreenReader=function(e){n.textContent=e,setTimeout(()=>{n.textContent=''},1e3)}}function f(e){const t=event.target.closest('.module-btn');t&&(t.style.opacity='0.7',t.style.pointerEvents='none');const n=document.createElement('div');n.className='loading-spinner',n.style.cssText='width:20px;height:20px;border:2px solid rgba(255,255,255,0.3);border-top:2px solid white;border-radius:50%;animation:spin 1s linear infinite;margin-left:10px',t.appendChild(n),window.announceToScreenReader&&window.announceToScreenReader(`Navigating to ${e}`),setTimeout(()=>{window.location.href=e},500)}e(),t(),n(),o(),r(),a(),i(),s(),l(),p(),console.log('QR Attendance System initialized successfully!'),window.QRAttendance={navigateToModule:f,announceToScreenReader:window.announceToScreenReader}});
